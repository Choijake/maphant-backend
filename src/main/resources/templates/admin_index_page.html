<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<link rel="stylesheet" th:href="@{/admin_index_page.css}">
<head>
  <title>관리자 대시보드</title>
</head>
<header>
  <h1>관리자 대시보드에 오신 것을 환영합니다</h1>
</header>

<section>
  <h2>게시판 신고 목록</h2>
  <button>
    <a href="?sortType=mostReportedRanking">신고 목록</a>
  </button>
  <table>
    <thead>
    <tr>
      <th>게시판 ID</th>
      <th>유저 ID</th>
      <th>제목</th>
      <th>내용</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="report : ${boardReport}">
      <td th:text="${report.boardId}"></td>
      <td th:text="${report.boardUserId}"></td>
      <td th:text="${report.boardTitle}"></td>
      <td th:text="${report.boardBody}"></td>
      <td>
        <button th:onclick="'getInfo(\'' + ${report.boardId} + '\')'">자세히보기</button>
        <button th:data-board-id="${report.boardId}" class="sanction-button-board">제재</button>
      </td>
    </tr>
    </tbody>
  </table>
</section>

<section>
  <h2>댓글 신고 목록</h2>
  <table>
    <thead>
    <tr>
      <th>댓글 ID</th>
      <th>유저 ID</th>
      <th>댓글내용</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="report : ${commentReport}">
      <td th:text="${report.commentId}"></td>
      <td th:text="${report.commentUserId}"></td>
      <td th:text="${report.commentBody}"></td>
      <td>
        <button th:onclick="'getInfo(\'' + ${report.commentId} + '\')'">자세히보기</button>
        <button th:data-comment-id="${report.commentId}" class="sanction-button-comment">제재</button>
      </td>
    </tr>
    </tbody>
  </table>
</section>
<footer>
  <p>&copy; 2023 관리자 대시보드</p>
</footer>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $(".sanction-button-board").click(function() {
      const boardId = $(this).data("board-id");
      if (confirm('이 게시글을 정지시키겠습니까?')) {
        $.post({
          url: '/admin/sanction/board',
          data: `boardId=${boardId}`,
          success: function(response) {
            // 서버로부터 받은 응답을 처리합니다.
            console.log(response);
            // 예시: 페이지를 새로고침하여 변경사항을 반영합니다.
            location.reload();
          },
          error: function(error) {
            console.error('요청 중 에러 발생:', error);
          }
        });
      }
    });
    $(".sanction-button-comment").click(function() {
      const commentId = $(this).data("comment-id");
      if (confirm('이 댓글을 정지시키겠습니까?')) {
        $.post({
          url: '/admin/sanction/comment',
          data: { commentId: commentId },
          success: function(response) {
            // 서버로부터 받은 응답을 처리합니다.
            console.log(response);
            // 예시: 페이지를 새로고침하여 변경사항을 반영합니다.
            location.reload();
          },
          error: function(error) {
            console.error('요청 중 에러 발생:', error);
          }
        });
      }
    });
  });
</script>
</html>
